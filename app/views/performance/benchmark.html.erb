<div class="max-w-7xl mx-auto p-6">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-purple-800">Pagination Performance Benchmark</h1>
  </div>
  
  <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6">
    <h2 class="text-xl font-semibold text-purple-800 mb-2">Simple Benchmark Analysis</h2>
    <p class="text-purple-700">
      This benchmark compares Pagy and Kaminari performance across multiple pages (1, 50, 100, 200) 
      using Ruby's standard Benchmark library with <%= number_with_delimiter(@results[:test_info][:iterations]) %> iterations per test.
    </p>
  </div>

  <% if @results %>
    <!-- Overall Performance Summary -->
    <div class="bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg p-6 mb-6">
      <h3 class="text-xl font-semibold mb-4 text-blue-800">🏆 Overall Performance Winner</h3>
      <div class="text-center">
        <div class="text-3xl font-bold text-blue-600 mb-2">
          <%= @results[:summary][:fastest_overall].to_s.humanize %>
        </div>
        <div class="text-sm text-blue-700 mb-4">
          Based on total execution time across all test pages
        </div>
        
        <!-- Total Times Display -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs">
          <% @results[:summary][:total_times].each do |method, time| %>
            <div class="bg-white p-3 rounded shadow">
              <div class="font-semibold"><%= method.to_s.humanize %></div>
              <div class="text-gray-600"><%= time.round(3) %>s total</div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Performance by Page Analysis -->
    <div class="bg-white shadow rounded-lg p-6 mb-6">
      <h3 class="text-xl font-semibold mb-4 text-gray-700">📊 Performance by Page Number</h3>
      <div class="overflow-x-auto">
        <table class="min-w-full table-auto">
          <thead>
            <tr class="bg-gray-100">
              <th class="px-4 py-2 text-left">Page</th>
              <th class="px-4 py-2 text-center">Pagy</th>
              <th class="px-4 py-2 text-center">Kaminari</th>
              <th class="px-4 py-2 text-center">Pagy Countless</th>
              <th class="px-4 py-2 text-center">Kaminari No Count</th>
              <th class="px-4 py-2 text-center">Winner</th>
            </tr>
          </thead>
          <tbody>
            <% @results[:summary][:page_winners].each do |page, data| %>
              <tr class="border-b hover:bg-gray-50">
                <td class="px-4 py-2 font-semibold">Page <%= page %></td>
                <td class="px-4 py-2 text-center text-sm">
                  <%= data[:times][:pagy]&.round(3) || 'N/A' %>s
                </td>
                <td class="px-4 py-2 text-center text-sm">
                  <%= data[:times][:kaminari]&.round(3) || 'N/A' %>s
                </td>
                <td class="px-4 py-2 text-center text-sm">
                  <%= data[:times][:pagy_countless]&.round(3) || 'N/A' %>s
                </td>
                <td class="px-4 py-2 text-center text-sm">
                  <%= data[:times][:kaminari_no_count]&.round(3) || 'N/A' %>s
                </td>
                <td class="px-4 py-2 text-center">
                  <span class="font-semibold text-green-600">
                    <%= data[:winner].to_s.humanize %>
                  </span>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Performance Notes -->
    <div class="bg-white shadow rounded-lg p-6 mb-6">
      <h3 class="text-xl font-semibold mb-4 text-gray-700">📝 Performance Insights</h3>
      <ul class="space-y-2">
        <% @results[:summary][:performance_notes].each do |note| %>
          <li class="flex items-start">
            <span class="text-green-500 mr-2">•</span>
            <span class="text-gray-700"><%= note %></span>
          </li>
        <% end %>
      </ul>
    </div>

    <!-- Test Information -->
    <div class="bg-gray-50 rounded-lg p-6">
      <h3 class="text-lg font-semibold mb-3 text-gray-700">🔍 Test Details</h3>
      <div class="grid md:grid-cols-3 gap-4 text-sm">
        <div>
          <strong>Iterations per test:</strong> <%= number_with_delimiter(@results[:test_info][:iterations]) %>
        </div>
        <div>
          <strong>Pages tested:</strong> <%= @results[:test_info][:pages_tested].join(', ') %>
        </div>
        <div>
          <strong>Total records:</strong> <%= number_with_delimiter(@results[:test_info][:total_records]) %>
        </div>
      </div>
    </div>

  <% else %>
    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center">
      <h3 class="text-lg font-semibold text-yellow-800 mb-2">No benchmark results available</h3>
      <p class="text-yellow-700 mb-4">Click "Run Comprehensive Benchmark" to start the analysis.</p>
    </div>
  <% end %>
  
  <!-- Action Buttons -->
  <div class="mt-8 text-center">
    <%= link_to "Run Comprehensive Benchmark", performance_benchmark_path, 
        class: "bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded transition duration-300",
        data: { 
          confirm: "This comprehensive benchmark will take several minutes to complete. Continue?",
          disable_with: "Running Benchmark..." 
        } %>
  </div>
  
  <!-- Methodology -->
  <div class="mt-8 bg-gray-50 p-6 rounded-lg">
    <h3 class="text-lg font-semibold mb-3 text-gray-700">📋 Benchmark Methodology</h3>
    <div class="text-gray-600 text-sm">
      <p class="mb-3">
        This benchmark uses Ruby's standard <code>Benchmark</code> library to measure real execution time 
        for pagination operations across different page numbers (1, 50, 100, 200).
      </p>
      <ul class="space-y-1">
        <li>• Each test runs <%= number_with_delimiter(@results[:test_info][:iterations]) %> iterations for statistical accuracy</li>
        <li>• Tests both standard and optimized (no-count) versions</li>
        <li>• Database is properly indexed for realistic performance</li>
        <li>• Results show real execution time in seconds</li>
      </ul>
    </div>
  </div>
</div>
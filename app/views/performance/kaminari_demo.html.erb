<h1>Kaminari 比較テスト</h1>

<h2>テスト内容: Kaminari標準版 vs Kaminari without_count比較</h2>

<% if @duration.is_a?(Hash) %>
  <p>Kaminari 標準 (データのみ): <%= sprintf("%.4f", @duration[:data_only][0] * 1000) %> ms</p>
  <p>Kaminari without_count (データのみ): <%= sprintf("%.4f", @duration[:data_only][1] * 1000) %> ms</p>
  <p>Kaminari 標準 (ビュー含む): <%= sprintf("%.4f", @duration[:with_view][0] * 1000) %> ms</p>
  <p>Kaminari without_count (ビュー含む): <%= sprintf("%.4f", @duration[:with_view][1] * 1000) %> ms</p>
<% end %>

<% articles = local_assigns[:articles] || @articles %>

<% if articles %>
  <p>ID一覧: <%= articles.map(&:id).join(', ') %></p>
  <% begin %>
    <%= paginate articles %>
  <% rescue RuntimeError => e %>
    <% if e.message.include?('non-count paginable scope') %>
      <div>
        <%= link_to_previous_page articles, '前のページ' %>
        <span>ページ <%= articles.current_page %></span>
        <%= link_to_next_page articles, '次のページ' %>
      </div>
    <% else %>
      <p>Error: <%= e.message %></p>
    <% end %>
  <% end %>
<% end %>

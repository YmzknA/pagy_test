<% content_for(:footer_links) do %>
  <%= link_to "Pagy Countlessと比較", performance_pagy_countless_demo_path, 
      class: "bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded transition duration-300" %>
<% end %>

<%= render 'keyset_test_links' %>

<%= render 'single_benchmark_layout', 
    color: 'orange', 
    title: 'Keyset Pagination デモ', 
    method_name: 'Keyset Pagination' do %>
  
  <h2 class="text-xl font-semibold mb-4 text-gray-700">記事一覧 (Keyset Pagination)</h2>
  
  <div class="mb-4 flex justify-center">
    <nav class="flex space-x-2">
      <% if @prev_cursor %>
        <%= link_to "← 前のページ", performance_keyset_pagination_demo_path(cursor: @prev_cursor, direction: 'prev'), 
                    class: "px-3 py-2 bg-orange-100 hover:bg-orange-200 text-orange-800 rounded" %>
      <% else %>
        <span class="px-3 py-2 bg-gray-200 text-gray-400 rounded cursor-not-allowed">
          ← 前のページ
        </span>
      <% end %>

      <span class="px-3 py-2 bg-orange-500 text-white rounded">
        カーソル: <%= @current_cursor || '開始' %>
      </span>

      <% if @next_cursor %>
        <%= link_to "次のページ →", performance_keyset_pagination_demo_path(cursor: @next_cursor, direction: 'next'), 
                    class: "px-3 py-2 bg-orange-100 hover:bg-orange-200 text-orange-800 rounded" %>
      <% else %>
        <span class="px-3 py-2 bg-gray-200 text-gray-400 rounded cursor-not-allowed">
          次のページ →
        </span>
      <% end %>
    </nav>
  </div>
  
  <div class="space-y-4">
    <% @articles.each do |article| %>
      <div class="border border-gray-200 rounded p-4">
        <div class="flex justify-between items-start mb-2">
          <h4 class="font-semibold text-lg text-gray-800"><%= article.title %></h4>
          <span class="text-sm text-gray-500 ml-4">ID: <%= article.id %></span>
        </div>
        <p class="text-gray-600 mt-2"><%= truncate(article.content, length: 200) %></p>
        <div class="text-sm text-gray-500 mt-2">
          作成日: <%= article.created_at.strftime("%Y年%m月%d日") %>
        </div>
      </div>
    <% end %>
  </div>
  
  <div class="mt-6 flex justify-center">
    <nav class="flex space-x-2">
      <% if @prev_cursor %>
        <%= link_to "← 前のページ", performance_keyset_pagination_demo_path(cursor: @prev_cursor, direction: 'prev'), 
                    class: "px-3 py-2 bg-orange-100 hover:bg-orange-200 text-orange-800 rounded" %>
      <% else %>
        <span class="px-3 py-2 bg-gray-200 text-gray-400 rounded cursor-not-allowed">
          ← 前のページ
        </span>
      <% end %>

      <span class="px-3 py-2 bg-orange-500 text-white rounded">
        カーソル: <%= @current_cursor || '開始' %>
      </span>

      <% if @next_cursor %>
        <%= link_to "次のページ →", performance_keyset_pagination_demo_path(cursor: @next_cursor, direction: 'next'), 
                    class: "px-3 py-2 bg-orange-100 hover:bg-orange-200 text-orange-800 rounded" %>
      <% else %>
        <span class="px-3 py-2 bg-gray-200 text-gray-400 rounded cursor-not-allowed">
          次のページ →
        </span>
      <% end %>
    </nav>
  </div>
<% end %>